<tr-sheet side="right">
  <button brnSheetTrigger class="w-full">
    <tr-trigger-card [trigger]="trigger()" />
  </button>
  <tr-sheet-content *brnSheetContent="let ctx" class="flex flex-col h-full">
    <tr-sheet-header>
      <h3 trSheetTitle>Edit Trigger</h3>
      <span trSheetDescription>Edit the trigger for this automation</span>
    </tr-sheet-header>
    <div class="h-full">
      @switch (stateGroup().selectionStep) {
        @case (TriggerSelectionStep.MAIN) {
          <div>
            <span class="tr-large">Select Integration</span>
            @if (!stateGroup().selectedIntegration) {
              <button
                trBtn
                class="w-full text-left items-center justify-start gap-1"
                variant="outline"
                (click)="goToIntegrationSelection()">
                <ng-icon name="heroBolt" size="1.1rem" />
                No Integration Selected
              </button>
            } @else {
              <tr-available-integration-list-card
                class="w-full"
                [integration]="stateGroup().selectedIntegration!"
                (click)="goToIntegrationSelection()" />
            }
          </div>
        }
        @case (TriggerSelectionStep.INTEGRATION) {
          <tr-integration-selection
            class="h-full"
            (selectedIntegration)="selectIntegration($event)" />
        }
      }
    </div>
    <div class="mt-auto flex flex-row justify-end">
      @if (stateGroup().selectionStep === TriggerSelectionStep.MAIN) {
        <button trBtn type="submit" class="w-[50%]">Save</button>
      } @else {
        <button trBtn class="w-[50%]" variant="outline" (click)="back()">
          Back
        </button>
      }
    </div>
  </tr-sheet-content>
</tr-sheet>
